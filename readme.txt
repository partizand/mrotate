Log rotation for Windows

Ротация логов для Windows

Задумка

Неким образом отбирается список файлов.
Затем их 
1. переименовываем или  архивируем
3. удаляем
4. архивированные или переименованные файлы удаляем, если нужно

Список файлов можно задать
1. По дате создания: старше n дней
2. По размеру: больше n байт

Пример настроек

[Entry]
Source=d:\temp\*.log
Period=90d (или 1m или daily,weekly,monthly); Период хранения оригиналов
Size=100K ; Обрабатывать все файлы больше указанного размера (или этот параметр или period)
compress=no|7z|строка запуска внешнего архиватора; использовать архивацию, иначе будет просто переименование
Target=d:\oldlog\%filename%%yymmdd% или %filename%%yymmdd% ; Если каталога нет то он Source
KeepPeriod=180d|5 (пять последних файлов) ; Сколько хранить старые файлы, аналог Period, если не указан, то вечно


На будущее
sharedscripts=yes; Эти команды выполняются один раз, иначе для каждого файла
prerotate=имя команды ; Выполнить команду перед ротацией
postrotate= имя команды ; Выполнить команду после ротации

Это было заменено на Target
oldDir=Каталог старых файлов
oldmask=%filename%%yymmdd%; Маска переименования/имени архива старых файлов

